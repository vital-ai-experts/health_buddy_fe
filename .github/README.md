# GitHub CI/CD é…ç½®

iOS é¡¹ç›®çš„æŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²é…ç½®æ–‡ä»¶ã€‚

## ğŸ“š æ–‡æ¡£

- **[å¿«é€Ÿå¼€å§‹](./QUICKSTART.md)** - 5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹æŒ‡å—
- **[å®Œæ•´é…ç½®æ–‡æ¡£](./CI-SETUP.md)** - è¯¦ç»†çš„é…ç½®è¯´æ˜å’Œæœ€ä½³å®è·µ

## ğŸ“ æ–‡ä»¶ç»“æ„

```
.github/
â”œâ”€â”€ README.md              # æœ¬æ–‡ä»¶
â”œâ”€â”€ QUICKSTART.md          # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ CI-SETUP.md           # å®Œæ•´é…ç½®æ–‡æ¡£
â”œâ”€â”€ workflows/            # GitHub Actions å·¥ä½œæµ
â”‚   â”œâ”€â”€ build.yml         # ä¸»æ„å»ºæµç¨‹ (è‡ªåŠ¨è§¦å‘)
â”‚   â””â”€â”€ manual-build.yml  # æ‰‹åŠ¨æ„å»ºæµç¨‹
â””â”€â”€ scripts/              # CI è¾…åŠ©å·¥å…·
    â””â”€â”€ ci-helper.sh      # CLI å·¥å…·è„šæœ¬
```

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### è§¦å‘æ„å»º

```bash
# Debug æ¨¡æ‹Ÿå™¨æ„å»º
./.github/scripts/ci-helper.sh trigger

# Release å½’æ¡£æ„å»º
./.github/scripts/ci-helper.sh trigger -c Release -t archive
```

### ä¸‹è½½æ—¥å¿—

```bash
./.github/scripts/ci-helper.sh logs
```

### æŸ¥çœ‹çŠ¶æ€

```bash
./.github/scripts/ci-helper.sh status
```

## ğŸ”§ åŠŸèƒ½ç‰¹æ€§

- âœ… è‡ªåŠ¨åŒ–æ„å»º (PR/Push è§¦å‘)
- âœ… æ‰‹åŠ¨è§¦å‘æ„å»º
- âœ… Debug/Release é…ç½®
- âœ… Simulator/Archive æ„å»º
- âœ… æ„å»ºæ—¥å¿—è‡ªåŠ¨æ”¶é›†
- âœ… äº§ç‰©è‡ªåŠ¨ä¸Šä¼ 
- âœ… å‘½ä»¤è¡Œå·¥å…·æ”¯æŒ
- âœ… æ„å»ºæŠ¥å‘Šç”Ÿæˆ
- âœ… ç¼“å­˜ä¼˜åŒ–

## ğŸ“– å·¥ä½œæµè¯´æ˜

### build.yml - ä¸»æ„å»ºå·¥ä½œæµ

**è§¦å‘æ¡ä»¶:**
- Push åˆ° main/develop/release/* åˆ†æ”¯
- Pull Request åˆ° main/develop
- æ‰‹åŠ¨è§¦å‘

**åŠŸèƒ½:**
- è‡ªåŠ¨æ„å»ºå’Œæµ‹è¯•
- ç”Ÿæˆæ„å»ºæŠ¥å‘Š
- ä¸Šä¼ æ—¥å¿—å’Œäº§ç‰©

### manual-build.yml - æ‰‹åŠ¨æ„å»ºå·¥ä½œæµ

**è§¦å‘æ–¹å¼:**
- ä»…æ‰‹åŠ¨è§¦å‘

**åŠŸèƒ½:**
- çµæ´»çš„æ„å»ºé…ç½®
- æ”¯æŒæ¸…ç†æ„å»º
- å®Œæ•´çš„å‚æ•°æ§åˆ¶

## ğŸ› ï¸ å·¥å…·ä½¿ç”¨

### ci-helper.sh - CLI å·¥å…·

å¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·,ç®€åŒ– CI æ“ä½œ:

```bash
# æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
./.github/scripts/ci-helper.sh --help

# è§¦å‘æ„å»º
./.github/scripts/ci-helper.sh trigger [é€‰é¡¹]

# æŸ¥çœ‹çŠ¶æ€
./.github/scripts/ci-helper.sh status

# ä¸‹è½½æ—¥å¿—
./.github/scripts/ci-helper.sh logs

# ä¸‹è½½äº§ç‰©
./.github/scripts/ci-helper.sh download

# å®æ—¶ç›‘æ§
./.github/scripts/ci-helper.sh watch

# å–æ¶ˆæ„å»º
./.github/scripts/ci-helper.sh cancel
```

## ğŸ“‹ å‰ç½®è¦æ±‚

1. **GitHub CLI (gh)**
   ```bash
   brew install gh
   gh auth login
   ```

2. **ä»“åº“è®¿é—®æƒé™**
   - éœ€è¦æœ‰ä»“åº“çš„ Actions æƒé™

3. **æœ¬åœ°ç¯å¢ƒ (å¯é€‰)**
   - Xcode 15.2+
   - XcodeGen

## ğŸ—ï¸ IaC è®¾è®¡åŸåˆ™

æœ¬é…ç½®éµå¾ª Infrastructure as Code æœ€ä½³å®è·µ:

- âœ… **ç‰ˆæœ¬æ§åˆ¶**: æ‰€æœ‰é…ç½®æ–‡ä»¶éƒ½åœ¨ Git ä¸­ç®¡ç†
- âœ… **å£°æ˜å¼é…ç½®**: ä½¿ç”¨ YAML å®šä¹‰å·¥ä½œæµ
- âœ… **å‚æ•°åŒ–**: çµæ´»çš„é…ç½®é€‰é¡¹
- âœ… **å¯å¤ç”¨**: æ¨¡å—åŒ–çš„ action å’Œè„šæœ¬
- âœ… **å¯å®¡è®¡**: æ‰€æœ‰å˜æ›´å¯è¿½è¸ª
- âœ… **ç¯å¢ƒéš”ç¦»**: æ¸…æ™°çš„ç¯å¢ƒåˆ’åˆ†
- âœ… **è‡ªåŠ¨åŒ–**: å‡å°‘äººå·¥å¹²é¢„

## ğŸ“¦ æ„å»ºäº§ç‰©

### æ—¥å¿—æ–‡ä»¶
- ä¿ç•™æœŸ: 30 å¤©
- å‘½å: `build-logs-<Config>-<Type>-<RunNumber>`
- å†…å®¹: å®Œæ•´æ„å»ºæ—¥å¿— + é”™è¯¯æ‘˜è¦ + æ„å»ºæŠ¥å‘Š

### æ„å»ºäº§ç‰©
- Simulator: `.app` æ–‡ä»¶ (7 å¤©)
- Archive: `.ipa` + `.xcarchive` æ–‡ä»¶ (30 å¤©)

## ğŸ” å¸¸è§ä»»åŠ¡

### æœ¬åœ°æ„å»º

```bash
cd ios
./scripts/build.sh -c -r -d simulator
```

### æŸ¥çœ‹æ„å»ºæ—¥å¿—

```bash
# ä¸‹è½½æ—¥å¿—
./.github/scripts/ci-helper.sh logs

# æŸ¥çœ‹æ„å»ºæŠ¥å‘Š
cat ci-logs/*/build-report.md

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
cat ci-logs/*/*.log | less
```

### è°ƒè¯•æ„å»ºé—®é¢˜

```bash
# 1. ä¸‹è½½æ—¥å¿—
./.github/scripts/ci-helper.sh logs -r <run-id>

# 2. æŸ¥çœ‹é”™è¯¯
grep -i "error:" ci-logs/*/*.log

# 3. æœ¬åœ°å¤ç°
cd ios && ./scripts/build.sh -c -r
```

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

- âŒ ä¸è¦åœ¨é…ç½®æ–‡ä»¶ä¸­ç¡¬ç¼–ç å¯†é’¥
- âœ… ä½¿ç”¨ GitHub Secrets å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- âœ… é™åˆ¶å·¥ä½œæµæƒé™
- âœ… å®šæœŸå®¡æŸ¥å’Œæ›´æ–°ä¾èµ–

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨æ„å»ºç¼“å­˜åŠ é€Ÿç¼–è¯‘
- å¹¶è¡Œæ‰§è¡Œç‹¬ç«‹ä»»åŠ¡
- æŒ‰éœ€ä¸‹è½½äº§ç‰©
- åˆç†è®¾ç½®ä¿ç•™æœŸé™

## ğŸ†˜ è·å–å¸®åŠ©

1. ğŸ“– æŸ¥çœ‹ [å¿«é€Ÿå¼€å§‹æŒ‡å—](./QUICKSTART.md)
2. ğŸ“š é˜…è¯» [å®Œæ•´æ–‡æ¡£](./CI-SETUP.md)
3. ğŸ› æ£€æŸ¥ GitHub Actions æ—¥å¿—
4. ğŸ’¬ è”ç³»å›¢é˜Ÿæˆå‘˜

## ğŸ“ æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ Git å†å²è®°å½•:
```bash
git log --oneline .github/
```

---

**ç»´æŠ¤è€…**: Development Team
**æœ€åæ›´æ–°**: 2025-11-15
